<link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
  rel="stylesheet"
  integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
  crossorigin="anonymous"
/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

<section
  *ngIf="!isLoggedIn"
  class="text-center h-100 d-flex justify-content-center align-items-center py-4"
>
  <div class="alert alert-danger">
    Please Login To see this page.

    <br />
    <a routerLink="/login">Login Here</a>
  </div>
</section>

<section class="h-auto">
  <div class="mx-auto my-3 card p-3 shadow rounded-3 col-11 col-sm-9 col-md-8">
    <h1>Checkout</h1>
    <hr />
    <div *ngIf="cartItems.length == 0" class="text-center">
      <h5>There is no products to order.</h5>
    </div>
    <div *ngIf="isOrderPlaced" class="text-center alert alert-success">
      <h5>
        Order Placed.
        <br />
        Thank you for shopping with us.
      </h5>
    </div>
    <div
      *ngIf="cartItems.length !== 0 && !isOrderPlaced"
      class="d-flex flex-wrap justify-content-center col-12"
    >
      <div class="col-11 col-lg-6">
        <div class="">
          <h2>Products</h2>
          <div
            *ngFor="let product of cartItems; let index"
            class="border p-2 rounded-4 d-flex mx-1 my-2 align-items-center"
          >
            <div>
              <div class="fw-bold border-bottom">
                {{ product.attributes.product.data.attributes.product_name }}
              </div>
              <div>
                Quantity : {{ product.attributes.quantity }}
                <span class="border-start border-dark ms-1 ps-2">
                  price: {{ product.attributes.product.data.attributes.price }}
                </span>
              </div>
            </div>
            <div class="border p-2 rounded-3 ms-auto me-3">
              {{
                product.attributes.product.data.attributes.price *
                  product.attributes.quantity
              }}
              â‚¹
            </div>
          </div>
        </div>
        <hr />
        <div class="my-2">
          <h2>Shipping Address</h2>
          <select class="form-select" name="" id="">
            <option value="">Select Shipping Address</option>
          </select>
        </div>
      </div>
      <div class="col-11 col-lg-5 ms-lg-auto">
        <h2>Order Summary</h2>

        <div class="table-responsive">
          <table class="table table-hover align-middle">
            <tbody class="">
              <tr class="">
                <td>Subtotal</td>
                <td>{{ grandTotal }}</td>
              </tr>
              <tr class="">
                <td>Shipping Charges</td>
                <td>50</td>
              </tr>
              <tr class="">
                <td>Total Tax (+18 %)</td>
                <td>{{ tax }}</td>
              </tr>
              <tr class="fw-bold">
                <td>Total Payable amount</td>
                <td>{{ payableAmount }}</td>
              </tr>
            </tbody>
            <tfoot></tfoot>
          </table>
        </div>
      </div>
      <button
        (click)="placeOrder()"
        class="btn btn-success col-6 col-md-4 col-lg-3 ms-lg-auto"
      >
        Place Order
      </button>
    </div>
  </div>
</section>
